<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | ~> 1.6.3 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | ~> 3.100.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | 3.100.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_application_gateway.app_gateway](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_gateway) | resource |
| [azurerm_public_ip.app_gateway_ip](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/public_ip) | resource |
| [azurerm_subnet.appgw_subnet](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/subnet) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_appgw_backend_http_settings"></a> [appgw\_backend\_http\_settings](#input\_appgw\_backend\_http\_settings) | List of objects including backend http settings configurations. | <pre>list(object({<br>    name     = string<br>    port     = optional(number, 443)<br>    protocol = optional(string, "Https")<br><br>    path       = optional(string)<br>    probe_name = optional(string)<br><br>    cookie_based_affinity               = optional(string, "Disabled")<br>    affinity_cookie_name                = optional(string, "ApplicationGatewayAffinity")<br>    request_timeout                     = optional(number, 20)<br>    host_name                           = optional(string)<br>    pick_host_name_from_backend_address = optional(bool, true)<br>    trusted_root_certificate_names      = optional(list(string), [])<br>    authentication_certificate          = optional(string)<br><br>    connection_draining_timeout_sec = optional(number)<br>  }))</pre> | n/a | yes |
| <a name="input_appgw_backend_pools"></a> [appgw\_backend\_pools](#input\_appgw\_backend\_pools) | List of objects with backend pool configurations. | <pre>list(object({<br>    name         = string<br>    fqdns        = optional(list(string))<br>    ip_addresses = optional(list(string))<br>  }))</pre> | n/a | yes |
| <a name="input_appgw_http_listeners"></a> [appgw\_http\_listeners](#input\_appgw\_http\_listeners) | List of objects with HTTP listeners configurations and custom error configurations. | <pre>list(object({<br>    name = string<br><br>    frontend_ip_configuration_name = optional(string)<br>    frontend_port_name             = optional(string)<br>    host_name                      = optional(string)<br>    host_names                     = optional(list(string))<br>    protocol                       = optional(string, "Https")<br>    require_sni                    = optional(bool, false)<br>    ssl_certificate_name           = optional(string)<br>    ssl_profile_name               = optional(string)<br>    firewall_policy_id             = optional(string)<br><br>    custom_error_configuration = optional(list(object({<br>      status_code           = string<br>      custom_error_page_url = string<br>    })), [])<br>  }))</pre> | n/a | yes |
| <a name="input_appgw_private"></a> [appgw\_private](#input\_appgw\_private) | Boolean variable to create a private Application Gateway. When `true`, the default http listener will listen on private IP instead of the public IP. | `bool` | `false` | no |
| <a name="input_appgw_probes"></a> [appgw\_probes](#input\_appgw\_probes) | List of objects with probes configurations. | <pre>list(object({<br>    name     = string<br>    host     = optional(string)<br>    port     = optional(number, null)<br>    interval = optional(number, 30)<br>    path     = optional(string, "/")<br>    protocol = optional(string, "Https")<br>    timeout  = optional(number, 30)<br><br>    unhealthy_threshold                       = optional(number, 3)<br>    pick_host_name_from_backend_http_settings = optional(bool, false)<br>    minimum_servers                           = optional(number, 0)<br><br>    match = optional(object({<br>      body        = optional(string, "")<br>      status_code = optional(list(string), ["200-399"])<br>    }), {})<br>  }))</pre> | `[]` | no |
| <a name="input_appgw_redirect_configuration"></a> [appgw\_redirect\_configuration](#input\_appgw\_redirect\_configuration) | List of objects with redirect configurations. | <pre>list(object({<br>    name = string<br><br>    redirect_type        = optional(string, "Permanent")<br>    target_listener_name = optional(string)<br>    target_url           = optional(string)<br><br>    include_path         = optional(bool, true)<br>    include_query_string = optional(bool, true)<br>  }))</pre> | `[]` | no |
| <a name="input_appgw_rewrite_rule_set"></a> [appgw\_rewrite\_rule\_set](#input\_appgw\_rewrite\_rule\_set) | List of rewrite rule set objects with rewrite rules. | <pre>list(object({<br>    name = string<br>    rewrite_rules = list(object({<br>      name          = string<br>      rule_sequence = string<br><br>      conditions = optional(list(object({<br>        variable    = string<br>        pattern     = string<br>        ignore_case = optional(bool, false)<br>        negate      = optional(bool, false)<br>      })), [])<br><br>      response_header_configurations = optional(list(object({<br>        header_name  = string<br>        header_value = string<br>      })), [])<br><br>      request_header_configurations = optional(list(object({<br>        header_name  = string<br>        header_value = string<br>      })), [])<br><br>      url_reroute = optional(object({<br>        path         = optional(string)<br>        query_string = optional(string)<br>        components   = optional(string)<br>        reroute      = optional(bool)<br>      }))<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_appgw_routings"></a> [appgw\_routings](#input\_appgw\_routings) | List of objects with request routing rules configurations. With AzureRM v3+ provider, `priority` attribute becomes mandatory. | <pre>list(object({<br>    name                        = string<br>    rule_type                   = optional(string, "Basic")<br>    http_listener_name          = optional(string)<br>    backend_address_pool_name   = optional(string)<br>    backend_http_settings_name  = optional(string)<br>    url_path_map_name           = optional(string)<br>    redirect_configuration_name = optional(string)<br>    rewrite_rule_set_name       = optional(string)<br>    priority                    = optional(number)<br>  }))</pre> | n/a | yes |
| <a name="input_appgw_subnet"></a> [appgw\_subnet](#input\_appgw\_subnet) | Subnet to use for Application Gateway | <pre>object({<br>    name           = string<br>    vnet_name      = string<br>    resource_group = string<br>  })</pre> | n/a | yes |
| <a name="input_appgw_url_path_map"></a> [appgw\_url\_path\_map](#input\_appgw\_url\_path\_map) | List of objects with URL path map configurations. | <pre>list(object({<br>    name = string<br><br>    default_backend_address_pool_name   = optional(string)<br>    default_redirect_configuration_name = optional(string)<br>    default_backend_http_settings_name  = optional(string)<br>    default_rewrite_rule_set_name       = optional(string)<br><br>    path_rules = list(object({<br>      name = string<br><br>      backend_address_pool_name   = optional(string)<br>      backend_http_settings_name  = optional(string)<br>      rewrite_rule_set_name       = optional(string)<br>      redirect_configuration_name = optional(string)<br><br>      paths = optional(list(string), [])<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_application_name"></a> [application\_name](#input\_application\_name) | The application that requires this resource | `string` | n/a | yes |
| <a name="input_autoscaling_parameters"></a> [autoscaling\_parameters](#input\_autoscaling\_parameters) | Map containing autoscaling parameters | <pre>object({<br>    min_capacity = number<br>    max_capacity = number<br>  })</pre> | `null` | no |
| <a name="input_custom_error_configuration"></a> [custom\_error\_configuration](#input\_custom\_error\_configuration) | List of objects with global level custom error configurations. | <pre>list(object({<br>    status_code           = string<br>    custom_error_page_url = string<br>  }))</pre> | `[]` | no |
| <a name="input_disable_waf_rules_for_dev_portal"></a> [disable\_waf\_rules\_for\_dev\_portal](#input\_disable\_waf\_rules\_for\_dev\_portal) | Whether to disable some WAF rules if the APIM developer portal is hosted behind this Application Gateway. See locals.tf for the documentation link. | `bool` | `false` | no |
| <a name="input_enable_http2"></a> [enable\_http2](#input\_enable\_http2) | Whether to enable http2 or not | `bool` | `true` | no |
| <a name="input_environment"></a> [environment](#input\_environment) | Environment where redis cache is provisioned | `string` | n/a | yes |
| <a name="input_firewall_policy_id"></a> [firewall\_policy\_id](#input\_firewall\_policy\_id) | ID of a Web Application Firewall Policy | `string` | `null` | no |
| <a name="input_force_firewall_policy_association"></a> [force\_firewall\_policy\_association](#input\_force\_firewall\_policy\_association) | Enable if the Firewall Policy is associated with the Application Gateway. | `bool` | `false` | no |
| <a name="input_frontend_port_settings"></a> [frontend\_port\_settings](#input\_frontend\_port\_settings) | Frontend port settings. Each port setting contains the name and the port for the frontend port. | <pre>list(object({<br>    name = string<br>    port = number<br>  }))</pre> | n/a | yes |
| <a name="input_ip_allocation_method"></a> [ip\_allocation\_method](#input\_ip\_allocation\_method) | Allocation method for the public IP. Warning, can only be `Static` for the moment. | `string` | `"Static"` | no |
| <a name="input_ip_ddos_protection_mode"></a> [ip\_ddos\_protection\_mode](#input\_ip\_ddos\_protection\_mode) | The DDoS protection mode of the public IP. Possible values are `Disabled`, `Enabled`, and `VirtualNetworkInherited`. | `string` | `null` | no |
| <a name="input_ip_ddos_protection_plan_id"></a> [ip\_ddos\_protection\_plan\_id](#input\_ip\_ddos\_protection\_plan\_id) | The ID of DDoS protection plan associated with the public IP. | `string` | `null` | no |
| <a name="input_ip_label"></a> [ip\_label](#input\_ip\_label) | Domain name label for public IP. | `string` | `""` | no |
| <a name="input_ip_sku"></a> [ip\_sku](#input\_ip\_sku) | SKU for the public IP. Warning, can only be `Standard` for the moment. | `string` | `"Standard"` | no |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | The resource group for the redis cache | `string` | n/a | yes |
| <a name="input_resource_location"></a> [resource\_location](#input\_resource\_location) | location of the redis cache | `string` | `"uaenorth"` | no |
| <a name="input_sku"></a> [sku](#input\_sku) | The Name of the SKU to use for this Application Gateway. Possible values are Standard\_v2 and WAF\_v2. | `string` | `"WAF_v2"` | no |
| <a name="input_sku_capacity"></a> [sku\_capacity](#input\_sku\_capacity) | The Capacity of the SKU to use for this Application Gateway - which must be between 1 and 10, optional if autoscale\_configuration is set | `number` | `2` | no |
| <a name="input_ssl_certificates_configs"></a> [ssl\_certificates\_configs](#input\_ssl\_certificates\_configs) | List of objects with SSL certificates configurations.<br>The path to a base-64 encoded certificate is expected in the 'data' attribute:<pre>data = filebase64("./file_path")</pre> | <pre>list(object({<br>    name                = string<br>    data                = optional(string)<br>    password            = optional(string)<br>    key_vault_secret_id = optional(string)<br>  }))</pre> | `[]` | no |
| <a name="input_ssl_policy"></a> [ssl\_policy](#input\_ssl\_policy) | Application Gateway SSL configuration. The list of available policies can be found here: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_gateway#disabled_protocols | <pre>object({<br>    disabled_protocols   = optional(list(string), [])<br>    policy_type          = optional(string, "Predefined")<br>    policy_name          = optional(string, "AppGwSslPolicy20170401S")<br>    cipher_suites        = optional(list(string), [])<br>    min_protocol_version = optional(string, "TLSv1_2")<br>  })</pre> | `null` | no |
| <a name="input_ssl_profile"></a> [ssl\_profile](#input\_ssl\_profile) | Application Gateway SSL profile. Default profile is used when this variable is set to null. https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_gateway#name | <pre>list(object({<br>    name                             = string<br>    trusted_client_certificate_names = optional(list(string), [])<br>    verify_client_cert_issuer_dn     = optional(bool, false)<br>    ssl_policy = optional(object({<br>      disabled_protocols   = optional(list(string), [])<br>      policy_type          = optional(string, "Predefined")<br>      policy_name          = optional(string, "AppGwSslPolicy20170401S")<br>      cipher_suites        = optional(list(string), [])<br>      min_protocol_version = optional(string, "TLSv1_2")<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | Tags to be added to the resources | `map(string)` | `{}` | no |
| <a name="input_trusted_root_certificate_configs"></a> [trusted\_root\_certificate\_configs](#input\_trusted\_root\_certificate\_configs) | List of trusted root certificates. `file_path` is checked first, using `data` (base64 cert content) if null. This parameter is required if you are not using a trusted certificate authority (eg. selfsigned certificate). | <pre>list(object({<br>    name                = string<br>    data                = optional(string)<br>    file_path           = optional(string)<br>    key_vault_secret_id = optional(string)<br>  }))</pre> | `[]` | no |
| <a name="input_waf_configuration"></a> [waf\_configuration](#input\_waf\_configuration) | WAF configuration object (only available with WAF\_v2 SKU) with following attributes:<pre>- enabled:                  Boolean to enable WAF.<br>- file_upload_limit_mb:     The File Upload Limit in MB. Accepted values are in the range 1MB to 500MB.<br>- firewall_mode:            The Web Application Firewall Mode. Possible values are Detection and Prevention.<br>- max_request_body_size_kb: The Maximum Request Body Size in KB. Accepted values are in the range 1KB to 128KB.<br>- request_body_check:       Is Request Body Inspection enabled ?<br>- rule_set_type:            The Type of the Rule Set used for this Web Application Firewall.<br>- rule_set_version:         The Version of the Rule Set used for this Web Application Firewall. Possible values are 2.2.9, 3.0, and 3.1.<br>- disabled_rule_group:      The rule group where specific rules should be disabled. Accepted values can be found here: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_gateway#rule_group_name<br>- exclusion:                WAF exclusion rules to exclude header, cookie or GET argument. More informations on: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_gateway#match_variable</pre> | <pre>object({<br>    enabled                  = optional(bool, true)<br>    file_upload_limit_mb     = optional(number, 100)<br>    firewall_mode            = optional(string, "Prevention")<br>    max_request_body_size_kb = optional(number, 128)<br>    request_body_check       = optional(bool, true)<br>    rule_set_type            = optional(string, "OWASP")<br>    rule_set_version         = optional(string, 3.1)<br>    disabled_rule_group = optional(list(object({<br>      rule_group_name = string<br>      rules           = optional(list(string))<br>    })), [])<br>    exclusion = optional(list(object({<br>      match_variable          = string<br>      selector                = optional(string)<br>      selector_match_operator = optional(string)<br>    })), [])<br>  })</pre> | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_appgw_id"></a> [appgw\_id](#output\_appgw\_id) | The ID of the Application Gateway. |
<!-- END_TF_DOCS -->